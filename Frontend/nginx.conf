
server {
  listen 80;
  server_name _;
  root /usr/share/nginx/html;
  index index.html;
  location / {
    try_files $uri $uri/ /index.html;
  }
  # Common proxy headers
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;

  # Auth Service
  location /api/auth/ {
    proxy_pass http://auth_service:8001/auth/;
  }

  # Users Service
  location /api/users/ {
    proxy_pass http://user_service:8002/users/;
  }

  # Units Service
  location /api/units/ {
    proxy_pass http://unit_service:8003/units/;
  }

  # Reservations Service
  location /api/reservations/ {
    proxy_pass http://reservation_service:8004/reservations/;
  }

  # Visitors Service
  location /api/visitors/ {
    proxy_pass http://visitor_service:8005/visitors/;
  }

  # Maintenance Service
  location /api/maintenance/ {
    proxy_pass http://maintenance_service:8006/maintenance/;
  }

  # Reporting Service
  location /api/reports/ {
    proxy_pass http://reporting_service:8007/reports/;
  }

  # Tenants Service
  location /api/tenants/ {
    proxy_pass http://tenant_service:8008/tenants/;
  }
}
